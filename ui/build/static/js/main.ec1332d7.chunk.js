(this.webpackJsonpmarketplace=this.webpackJsonpmarketplace||[]).push([[0],{106:function(e,t,n){e.exports={root:"ProductSection_root__1i3xl"}},122:function(e,t,n){e.exports=n(150)},127:function(e,t,n){},150:function(e,t,n){"use strict";n.r(t);var a,r,o,c=n(0),i=n.n(c),u=n(14),l=n.n(u),s=(n(127),n(90)),p=n.n(s),d=(n(128),n(109)),m=n(15),f=n(33),_=n(34),h=n(17),b=n(57),v=n.n(b),g=n(102),E=n.n(g),C=n(63),k=n.n(C),O=n(58),w=n.n(O),y=n(45),j=n.n(y),S=i.a.memo((function(e){var t=e.title,n=e.content,a=e.openContentForId,r=e.id,o=e.open,c=e.onClose;return i.a.createElement("div",{className:w.a.root},i.a.createElement("div",{onClick:o?c:function(){a(r)},className:j()(w.a.titleContainer,Object(_.a)({},w.a.open,o))},t),o&&i.a.createElement("div",{className:w.a.filterContentContainer},n))})),P=n(91),x=n.n(P),N=function(e){var t=e.name,n=e.onSelect,a=e.onRemove;return i.a.createElement("div",{className:x.a.root,onClick:n},a&&i.a.createElement("span",{onClick:a},i.a.createElement(k.a,null)," "),i.a.createElement("span",null,t))},F=n(73),I=n.n(F),T=n(8),A=n.n(T),L=n(21),D=n(114),B=n(74),q=n(29),R=n(76);var U,H,W,K=Object(R.a)(a||(a=Object(B.a)(["query fetchFilters{catalog{__typename filters{__typename brand{__typename id name}}}}"]))),V=Object(R.a)(r||(r=Object(B.a)(["query fetchProducts($brandIds:[String!],$pageInfo:PaginationInput){catalog{__typename products(input:{pageInfo:$pageInfo,filters:{brandIds:$brandIds}}){Price{__typename amount currency site url}__typename id name}}}"]))),$=Object(R.a)(o||(o=Object(B.a)(["mutation likeProduct($liked:Boolean!,$productId:String!){catalog{__typename likeProduct(input:{productId:$productId,liked:$liked}){__typename success}}}"]))),J=n(113),M=n(112),Q=new D.a({link:Object(M.a)({uri:"/gql-gateway/graphql",credentials:"include"}),cache:new J.a,defaultOptions:{query:{fetchPolicy:"no-cache"}}}),G=function(){var e;return U||(e=Q,U={fetchFilters:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.query(Object(q.a)(Object(q.a)({},t),{},{query:K}))},watchfetchFilters:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.watchQuery(Object(q.a)(Object(q.a)({},t),{},{query:K}))},fetchProducts:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.query(Object(q.a)(Object(q.a)({},n),{},{query:V,variables:t}))},watchfetchProducts:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.watchQuery(Object(q.a)(Object(q.a)({},n),{},{query:V,variables:t}))},likeProduct:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.mutate(Object(q.a)(Object(q.a)({},n),{},{mutation:$,variables:t}))}}),U},Y=function(e){return e.reduce((function(e,t){return t.amount&&e.push({amount:t.amount||"",url:z(t.site||""),site:t.site||"",currency:t.currency||void 0}),e}),[])},z=function(e){switch(e){case"HAVEN":return"https://havenshop.com/";default:return""}},X=function(e){return e.reduce((function(e,t){var n=Y(t.Price);return n.length>0&&e.push({id:t.id||"",name:t.name||"",prices:n}),e}),[])},Z=function(e){return e.reduce((function(e,t){return e.push({name:t.name||"",id:t.id||""}),e}),[]).sort((function(e,t){return e.name.localeCompare(t.name)}))},ee={fetchProducts:function(){var e=Object(L.a)(A.a.mark((function e(t,n){var a,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=G(),e.prev=1,e.next=4,a.fetchProducts({brandIds:t,pageInfo:n});case 4:return r=e.sent,e.abrupt("return",X(r.data.catalog.products));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),fetchFilters:function(){var e=Object(L.a)(A.a.mark((function e(t){var n,a,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=G(),e.prev=1,e.next=4,n.fetchFilters({});case 4:return a=e.sent,r=a.data.catalog.filters,e.abrupt("return",Z(r?r.brand:[]));case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),likeProduct:function(e,t){var n=G();try{n.likeProduct({productId:e,liked:t}).then((function(e){e.data&&e.data.catalog.likeProduct&&e.data.catalog.likeProduct.success}))}catch(a){}}},te=n(195),ne=n(184),ae=n(101),re=i.a.memo((function(e){var t=e.id,n=e.openContentForId,a=e.selectedId,r=e.onClose,o=i.a.useState([]),c=Object(h.a)(o,2),u=c[0],l=c[1],s=i.a.useState(void 0),p=Object(h.a)(s,2),d=p[0],m=p[1],f=function(){m(void 0)};i.a.useEffect((function(){ee.fetchFilters().then((function(e){l(e)}))}),[]),i.a.useEffect((function(){a!==t&&f()}),[a]);var _=i.a.useMemo((function(){return d?u.filter((function(e){return e.name.toLocaleLowerCase().includes(d)})):u}),[d,u]),b=Object(ae.debounce)((function(e){console.log(e),e&&0!==e.length?m(e):f()}),300),v=i.a.useCallback((function(e){b(e.target.value)}),[]),g=i.a.createElement("div",{className:I.a.brandSection},i.a.createElement("div",{className:I.a.search},i.a.createElement("div",{className:I.a.searchIcon},i.a.createElement(ne.a,null)),i.a.createElement(te.a,{id:"brand-search",onChange:v,placeholder:"Search\u2026",inputProps:{"aria-label":"search"},inputComponent:"input"})),_.map((function(e){return i.a.createElement(N,{name:e.name,key:e.id})})));return i.a.createElement(S,{title:"Brand",content:g,openContentForId:n,open:t===a,id:t,onClose:r})})),oe=n(79),ce=n.n(oe),ie=n(115),ue=n(46),le=n(47),se=n(71),pe=n(70),de=n(111),me=Object(de.a)({app:"catalog-ui",plugins:[]}),fe={logPageView:function(){var e=Object(L.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.page();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logClick:function(){var e=Object(L.a)(A.a.mark((function e(t,n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.track("".concat(t,"-click"),n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},_e=["clickEventName","onClick"],he=i.a.memo((function(e){var t=e.onClick,n=(e.rounded,e.filled),a=void 0!==n&&n,r=e.ariaLabel,o=e.children;return i.a.createElement("button",{"aria-label":r,className:j()(ce.a.root,Object(_.a)({},ce.a.filled,a)),onClick:t},o)})),be=(H=he,i.a.Component,i.a.memo((function(){var e=Object(c.useState)(""),t=Object(h.a)(e,2),n=t[0],a=t[1],r=function(){return a("")},o=""!==n;return i.a.createElement("div",{className:v.a.root},i.a.createElement("div",{className:j()(v.a.icon,Object(_.a)({},v.a.open,o)),onClick:o?r:void 0},o?i.a.createElement(k.a,null):i.a.createElement(E.a,null)),i.a.createElement(re,{id:"brand",selectedId:n,openContentForId:a,onClose:r}),i.a.createElement("div",null,i.a.createElement("div",{className:v.a.buttonContainer},i.a.createElement(he,{ariaLabel:"apply-filter-button"},"Apply "))))}))),ve=n(43),ge=n.n(ve),Ee=function(e){var t=e.onCardClick,n=(e.href,e.imgURL,e.title),a=e.subHeader,r=e.footer;return i.a.createElement("div",{className:ge.a.root,onClick:t},i.a.createElement("figure",{className:ge.a.imageContainer},i.a.createElement("div",{className:ge.a.image,style:{backgroundImage:"url(https://img.ssensemedia.com/images/b_white,c_lpad,g_south,h_706,w_470/c_scale,h_280/f_auto,dpr_2.0/201404M202014_1/versace-red-biggie-sunglasses-hoodie.jpg)"}})),i.a.createElement("div",{className:ge.a.textContainer},i.a.createElement("div",{className:ge.a.titleContainer},i.a.createElement("h3",null,n),a),i.a.createElement("div",{className:ge.a.cardFooter},r)))},Ce=n(105),ke=n.n(Ce),Oe=n(104),we=n.n(Oe),ye=n(80),je=n.n(ye),Se=n(75),Pe=n.n(Se),xe=n(194),Ne=n(187),Fe=n(186),Ie=n(191),Te=n(192),Ae=n(188),Le=n(189),De=n(190),Be=n(77),qe=n(103),Re=n.n(qe),Ue=n(185),He=i.a.forwardRef((function(e,t){return i.a.createElement(Ue.a,Object.assign({direction:"up",ref:t},e))})),We=i.a.memo((function(e){var t=e.product,n=e.open,a=e.handleClose,r=t.prices.map((function(e,t){return i.a.createElement(Fe.a,{onClick:function(){return window.open(e.url)},button:!0,key:t},i.a.createElement(Ne.a,{primary:e.amount,secondary:e.site}))}));return i.a.createElement(xe.a,{"aria-labelledby":"price-aggregate-dialogue",className:Pe.a.root,fullScreen:!0,open:n,onClose:a,TransitionComponent:He},i.a.createElement(Ae.a,{className:Pe.a.appBar},i.a.createElement(Le.a,null,i.a.createElement(De.a,{edge:"start",color:"inherit",onClick:a,"aria-label":"close"},i.a.createElement(Re.a,null)),i.a.createElement(Be.a,{variant:"h6",className:Pe.a.title},t.name))),i.a.createElement(Ie.a,null,i.a.createElement(Te.a,null),r))})),Ke=i.a.memo((function(e){var t=e.product,n=e.showLikeIcon,a=void 0!==n&&n,r=i.a.useState(!1),o=Object(h.a)(r,2),c=o[0],u=o[1],l=i.a.useState(t.isLiked||!1),s=Object(h.a)(l,2),p=s[0],d=s[1],m=p?i.a.createElement(we.a,{"aria-label":"unlike-icon",onClick:function(e){e.stopPropagation(),d(!1),ee.likeProduct(t.id,!1)}}):i.a.createElement(ke.a,{"aria-label":"like-icon",onClick:function(e){e.stopPropagation(),d(!0),ee.likeProduct(t.id,!0)}}),f=i.a.createElement("div",{className:je.a.subHeader},i.a.createElement("h4",null,"Brand"),i.a.createElement("div",null,t.prices.length>1?"Found on ".concat(t.prices.length," sites"):"Found on 1 site")),_=i.a.createElement("div",{className:je.a.footer},i.a.createElement("span",null,t.prices[0].amount," "),a&&m);return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ee,{title:t.name,footer:_,subHeader:f,onCardClick:function(){u(!0)}}),i.a.createElement(We,{product:t,open:c,handleClose:function(){u(!1)}}))})),Ve=n(106),$e=n.n(Ve);!function(e){e.FIFTY="FIFTY",e.FIVE_HUNDRED="FIVE_HUNDRED",e.ONE_HUNDRED="ONE_HUNDRED"}(W||(W={}));var Je,Me=i.a.memo((function(){var e=i.a.useState([]),t=Object(h.a)(e,2),n=t[0],a=t[1],r=i.a.useState(1),o=Object(h.a)(r,1)[0],c=i.a.useState(!1),u=Object(h.a)(c,2),l=u[0],s=u[1];return i.a.useEffect((function(){f.CookieMonster.getCookie(f.CookieType.ACCESS_TOKEN)||s(!1)}),[]),i.a.useEffect((function(){ee.fetchProducts(void 0,{page:o,limit:W.FIFTY}).then((function(e){a(e)}))}),[]),i.a.createElement("div",{className:$e.a.root},n.map((function(e){return i.a.createElement(Ke,{key:"".concat(e.name,"_").concat(e.id),product:e,showLikeIcon:l})})))})),Qe=i.a.memo((function(){return i.a.createElement(f.StandardPage,{pageId:"products"},i.a.createElement(be,null),i.a.createElement(Me,null))})),Ge=function(e){Object(se.a)(n,e);var t=Object(pe.a)(n);function n(){return Object(ue.a)(this,n),t.apply(this,arguments)}return Object(le.a)(n,[{key:"render",value:function(){return c.createElement(f.StandardPage,{pageId:""},c.createElement("div",null," Page does not exist "))}}]),n}(c.Component),Ye=i.a.memo((function(){return i.a.createElement(f.AuthenticatedPage,{onUnauthenticated:function(){window.location.href="/login"},pageId:"account"},i.a.createElement("div",null,"Account Info"))})),ze=function(){function e(){Object(ue.a)(this,e)}return Object(le.a)(e,null,[{key:"get",value:function(){var t=Object(L.a)(A.a.mark((function t(n){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(n,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(function(){var t=Object(L.a)(A.a.mark((function t(n){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.handleResponse(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"post",value:function(){var t=Object(L.a)(A.a.mark((function t(n,a){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(){var t=Object(L.a)(A.a.mark((function t(n){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.handleResponse(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"handleResponse",value:function(){var e=Object(L.a)(A.a.mark((function e(t){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return n=e.sent,e.abrupt("return",{responseObj:n,statusCode:t.status});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Xe="/authentication-service",Ze=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).JWT_PRIVATE_KEY,Xe);!function(e){e[e.SUCCESS=0]="SUCCESS"}(Je||(Je={}));var et={login:function(){var e=Object(L.a)(A.a.mark((function e(t,n){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze.post("".concat(Ze,"/login/user"),{username:t,password:n});case 2:return a=e.sent,e.abrupt("return",200===a.statusCode?Je.SUCCESS:{status:a.statusCode,message:""});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),validateToken:function(){var e=Object(L.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{isValid:!0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},tt=n(50),nt=n.n(tt),at=n(193),rt=n(107),ot=n.n(rt),ct=n(108),it=n.n(ct),ut=function(e){var t=e.submitting,n=e.error,a=e.onLogin,r=i.a.useState(!1),o=Object(h.a)(r,2),c=o[0],u=o[1],l=i.a.useState(""),s=Object(h.a)(l,2),p=s[0],d=s[1],m=i.a.useState(""),f=Object(h.a)(m,2),_=f[0],b=f[1],v=i.a.useCallback((function(e){return function(t){switch(e){case"password":b(t.target.value);break;case"username":d(t.target.value)}}}),[]),g=i.a.useCallback((function(){u(!c)}),[c]),E=i.a.useCallback((function(){a(p,_)}),[p,_]),C=0===_.length||0===p.length;return i.a.createElement("div",{className:nt.a.root},i.a.createElement("div",{className:nt.a["login-content"]},n&&i.a.createElement(Be.a,{"aria-label":"error-message",className:nt.a.error},n),i.a.createElement("h1",null,"Login"),i.a.createElement("div",{className:nt.a["form-input"]},i.a.createElement(te.a,{id:"username",onChange:v("username"),placeholder:"Username",inputProps:{"aria-label":"username"},inputComponent:"input"}),i.a.createElement("div",{className:nt.a["password-input"]},i.a.createElement(te.a,{id:"password",onChange:v("password"),placeholder:"Password",inputProps:{"aria-label":"password"},inputComponent:"input",type:c?"text":"password",value:_}),c?i.a.createElement(it.a,{onClick:g}):i.a.createElement(ot.a,{onClick:g}))),i.a.createElement("div",null,i.a.createElement(he,{onClick:C?function(){}:E,disabled:C},t?i.a.createElement(at.a,{style:{height:"20px",width:"20px"}}):"Submit"))))},lt=function(e){var t=e.history.push,n=i.a.useState(!1),a=Object(h.a)(n,2),r=a[0],o=a[1],c=i.a.useState(),u=Object(h.a)(c,2),l=u[0],s=u[1];return i.a.createElement(ut,{submitting:r,onLogin:function(e,n){0!==n.length&&0!==e.length&&(o(!0),et.login(e,n).then((function(e){e!==Je.SUCCESS?s(function(e){switch(e){case 401:return"The username or password specified is not valid";default:return"Sorry and error occurred. Please try again."}}(e.status)):t("/")})).catch((function(e){return s(e.message)})).finally((function(){return o(!1)})))},error:l})},st=function(){return i.a.createElement("div",{className:p.a.App},i.a.createElement(d.a,null,i.a.createElement(m.c,null,i.a.createElement(m.a,{exact:!0,path:"/",component:Qe}),i.a.createElement(m.a,{exact:!0,path:"/login",component:lt}),i.a.createElement(m.a,{exact:!0,path:"/account",component:Ye}),i.a.createElement(m.a,{component:Ge}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(st,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},43:function(e,t,n){e.exports={imageContainer:"Card_imageContainer__2oJrr",image:"Card_image__17Gg9",textContainer:"Card_textContainer__1-LEa",root:"Card_root__k87Sv",cardFooter:"Card_cardFooter__1Dc5q",titleContainer:"Card_titleContainer__28Rqb"}},50:function(e,t,n){e.exports={"form-input":"LoginForm_form-input__2aYBB",root:"LoginForm_root__30wIi",error:"LoginForm_error__2Ukga",title:"LoginForm_title__3rPrx",button:"LoginForm_button__QNtMT","login-content":"LoginForm_login-content__1Adbz","password-input":"LoginForm_password-input__2Dzsv"}},57:function(e,t,n){e.exports={root:"Filters_root__z8DTz",icon:"Filters_icon__JQq9U",open:"Filters_open__1P2D6",buttonContainer:"Filters_buttonContainer__3G7r8"}},58:function(e,t,n){e.exports={root:"FilterWrapper_root__2aGQq",titleContainer:"FilterWrapper_titleContainer__1h1cQ",open:"FilterWrapper_open__1t9mv",filterContentContainer:"FilterWrapper_filterContentContainer__1dqnp"}},73:function(e,t,n){e.exports={popularSection:"Brand_popularSection__1jUBs",contentContainer:"Brand_contentContainer__2WPeK",brandSection:"Brand_brandSection__2x5cq",search:"Brand_search__24Tt2",searchIcon:"Brand_searchIcon__u-Vsg"}},75:function(e,t,n){e.exports={root:"ProductCardDialog_root__3TgF4",appBar:"ProductCardDialog_appBar__RKJjZ",title:"ProductCardDialog_title__1DD_T"}},79:function(e,t,n){e.exports={root:"Button_root__aaXK7",filled:"Button_filled__2R5yO"}},80:function(e,t,n){e.exports={footer:"ProductCard_footer__1KBdV",subHeader:"ProductCard_subHeader__2MXx7"}},90:function(e,t,n){e.exports={App:"App_App__15LM-","App-logo":"App_App-logo__1GLNd","App-logo-spin":"App_App-logo-spin__1EbLw","App-header":"App_App-header__3nnPn","App-link":"App_App-link__TRj1P"}},91:function(e,t,n){e.exports={root:"Chip_root__kd-ex"}}},[[122,1,2]]]);
//# sourceMappingURL=main.ec1332d7.chunk.js.map